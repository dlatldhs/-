### kernul(커널)
```
- OS 의 핵심 요소
- 하드웨어와 OS를 잇는 핵심 INTERFACE
- 컴퓨터 유형에 관계없이 모든 하드웨어 제어함
```
#### 기능
```
- 메모리 관리
  : 메모리가 어디서 무엇을 얼마나 사용하는지 추적함
- 프로세스 관리
  : 어떤 프로세스(process) 가 CPU를 사용을 할 건지 결정
- 장치 드라이버
  : 하드웨어와 프로세서의 중재자 역할 with 인터프리터 역할 수행
- 시스템 호출 및 보안 담당
  : 프로세서의 서비스 요청 수신
- 시그널 처리
- 커널 동기화
- 인터럽트 처리 및 시스템 호출 , 문맥 교환
- 주요 커널 함수 실행
```

#### 종류
```
1. 단일형 커널(monolithic kernel)
2. 마이크로 커널(micro kernel)
3. 혼합형 커널(hybrid kernel)
개인적으로 어떤 구조를 가지고 있는지만 알고 있으면 좋은듯
```

#### 단일형 커널(monolithic kernel)
``` 
입출력,네트워크등 운영체제에서 일어나는 것을 하나하나 처리하는 방식
속도가 빠르지만 안정성이나 크기가 별로 좋지 않음
```

#### 마이크로 커널(micro kernel)
```
프로세스 관리, 메모리 관리 등과 같이 필수 기능만 있는 구조
==> 필수 요소만 있어서 가벼움
서버 개발에 용이함
(단일형 커널에 서버 추가한 격)
real time 이 중요한 임베디드에서 사용됨
```

#### 모놀리식 커널(Monolithic kernel)
```
Application을 제외한 모든 system 기능을 커널이 관리함
ex) linux , Unix 등
```

#### 모듈형 커널
```
모듈의 형태로 쉽게 시스템 기능을 추가하는 거?
모놀리식 커널 + 마이크로 커널 = 모듈형 커널 약간 이런 개념
```

### 커널 디렉토리
#### /arch
##### architecture의 약어로 모든 아키텍처 및 cpu에 종속적인 커널 코드가 포함되어있다.<br>cpu의 타입에 따라 하위 디렉터리로 다시 구분하는 경우도 있다.
#### /fs
##### 파일 시스템의 약어로 linux에서 지원하는 다양한 파일 시스템들( open(),read(),write()등의) 시스템 호출이 구현되어 있는 디렉터리다.
#### /drivers
##### 말 그대로 드라이버를 의미한다. 모든 시스템의 디바이스 드라이버가 구현된 디렉터리이다.<br>디바이스 드라이버란 디스크, 터미널 ,네트워크 카드 등 주변 장치를 추상화하여 관리하는 커널의 구성요소이다.
> #### 왜 추상화를 하는 것일까??
> ##### 맨 처음에는 관리할 하드웨어의 개수가 많이 있지 않아서 가능했지만 업데이트하고 버전이 올라가게 되면서 관리할 주변 장치 & 장비들이 많아지면서 관리가 힘들어져 이것들을 추상화시켜서 관리를 하게 만든 것이다.

## 커널의 동작 구조
> #### 커널 동작구조는 디바이스 , 메모리 , 프로세서 등 하드웨어 위에 커널(kernel)이 존재한다.
> *리눅스에서는 모든 개념이 파일단위로 제공된다.*
> #### 하드웨어를 추상화 시켜 사용자 레벨 프로세서들에게 서비스를 제공한다.
> ##### 시스템 콜이 발생하면 응용 프로그램의 실행을 일시적으로 중단하고 리눅스 커널 코드를 실행한다. 리눅스 커널에서 시스템 콜 처리를 프로세스 콘텍트(Process Context)의 연장으로 실행된다.
> ## 실행단계
> ### 커널의 압축해제 준비 단계
> ```
> 인터럽트 비활성화 , 동적 메모리 할당 , BSS 영역 초기화 , 페이지 디렉터리 초기화 , 캐시 켜기 등을 수행함 -> 전체적으로 초기화 하고 여러가지 할당함```

### 커널 모드
> #### 리눅스 커널은 시스템의 중요한 자원을 관리하기 떄문에 사용자가 막 건드릴 수 있는 그런게 아님 예를 들어서 프로그램 간에 충돌 및 실행에 문제가 발생할 수도 있기 때문에 Kernel Mode 커널모드 와 사용자 모드로 나눠서 제공을 함
> ### 커널모드는 하드웨어를 직접적으로 제어할 수 있는 권한이 생김 사실상 모든 자원을 접근 및 명령할 수 있음
> ### 사용자 모드는 시스템 데이터에만 접근 가능함 하드웨어에는 접근이 제한됨 
> ### 언제 사용자 모드에서 커널모드로 바뀌는가 ??
> ##### 사용자가 사용자 모드에서 시스템 서비스를 호출하면 커널 모드로 전환됨 -> 사용자가 어떠한 프로그램을 실행할 때 프로그램 안에서 하드웨어 장치를 사용하는 코드가 있으면 그 때 커널 모드로 바뀜 그리고 화드웨어 사용이 다 끝나면 사용자 모드로 넘어가게 됨
