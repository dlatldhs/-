# `Cookie` 란 무엇인가? 
### 탄생 배경
    - HTTP(Hyper Text Transfer Protocol) 는 Request 와 Response 의 쌍이 독립적으로 구성되어 통신하는 Connectionless Protocol 임
    - Connectionless 속성은 하나의 요청에 하나의 응답`을 한 후 네트워크 연결을 끝 맺는 것
    - HTTP 요청마다 새로운 커넥션을 열기 때문에 사용자 인증을 계속해야됨 -> Cookie 생김!
    - 결론 : 브라우저가 `사용자의 정보`를 저장하여 갖고 있다가 `같은 서버`에 접속하여 필요할 때 마다 주는게 `쿠키`다.(Request 할 때 같이 보냄)
### 1. HTTP 프로토콜 특징

Connectionless: 하나의 요청에 하나의 응답을 한 후 연결을 종료하는 것을 의미합니다. 특정 요청에 대한 연결은 이후의 요청과 이어지지 않고 새 요청이 있을 때 마다 항상 새로운 연결을 맺음

Stateless: 통신이 끝난 후 상태 정보를 저장하지 않는 것을 의미합니다. 이전 연결에서 사용한 데이터를 다른 연결에서 요구할 수 없음..

### 2. 용도
일반적으로 쿠키는 클라이언트의 `정보 기록`과 `상태 정보`를 표현하는 용도로 쓰임

#### 정보 기록
웹 서버는 각 클라이언트의 팝업 옵션을 기억하기 위해 `쿠키`(cookie)에 해당 정보를 기록 and 쿠키로 팝업 창 표시 여부 판단<br>
쿠키가 서버와 통신할 때마다 전송되기에 쿠키가 필요 없는 요청을 보낼 때 리소스 낭비가 발생가능<br>
So Modern Storage APIs를 통해 데이터 저장 방식을 권장함

#### 상태 정보
웹 서버에서 로그인 상태 & 이용자 구별 등을 해야하는데 이때 클라이언트를 식별할 수 있는 값을 쿠키케 저장해 사용함

<img src = https://padawanr0k.github.io/static/07db78149f53a5eeafdfebd9251185e1/68386/web_cookie.jpg />

### 쿠키가 없는 통신 & 있는 통신
#### 쿠키가 없는 통신 
서버는 요청을 보낸 클라이언트가 누군지 모른다. -> 현재 어떤 클라이언트와 통신하고 있는지 모름..<br>계속 확인 받아야됨
#### 쿠키가 있는 통신
클라이언트는 서버에 요청을 보낼 때 마다 쿠키를 포함하고 서버는 해당 쿠키를 통해 클라이언트를 식별함<br>계속 확인 안받아두됨

### 쿠키 변조
쿠키는 클라이언트의 브라우저에 저장되고 요청에 포함되는 정보 --> 변조 가능함 KEY = Value 정보를 사칭해서 서버에 요청할 수도 있어서 변조가 가능함(서버가 별 다른 검증 없이 쿠키를 토해 이용자의 인증 정보를 확인한다면)

### 쿠키 사용법
#### Server
HTTP 응답 중 헤더에 쿠키 설정 헤더 (Set-Cookie)를 추가하면 클라이언트의 브라우저가 쿠키를 설정함
```
HTTP/1.1 200 OK
Server: Apache/2.4.29 (Ubuntu)
Set-Cookie: name=test;
Set-Cookie: age=30; Expires=Fri, 30 Sep 2022 14:54:50 GMT;
...
```
#### Client
JS를 이용해 쿠키를 설정해줌
```
document.cookie = "name=test;"
document.cookie = "age=30; Expires=Fri, 30 Sep 2022 14:54:50 GMT;"
```
#### 쿠키 특
`cookie` 는 `client` 에 저장됨 -> `client`는 쿠키 조회/수정/추가 가능함<br>
`client` 가 서버에 Request(요청)할 때 저장된 cookie 를 요청 헤더에 넣어서 전송함 -> 사용자가 요청을 보낼 때 쿠키 헤더 변조 가능함<br>
<b>쿠키</b> 설정할 때 만료 시간 지정가능하고 만료 시간 이후에는 클라이언트에서 삭제됨(쿠키가)<br>
##### 쿠키 보는법
`F12` or 검사 해서 console 창에서 `document.cookie`하면 쿠키를 볼 수 있다. 하지만 쿠키 옵션에 따라서 안 보일 수도 있다.
Application에서 cookie 확인 가능함
